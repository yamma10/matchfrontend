{"ast":null,"code":"import _regeneratorRuntime from\"/home/oshimayamato/practice/matching/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/oshimayamato/practice/matching/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/oshimayamato/practice/matching/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import io from\"socket.io-client\";import{AuthContext}from'../../state/AuthContext';import axios from'axios';import\"./RoomList.css\";import Room from'../../components/room/Room';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function RoomList(){var _useContext=useContext(AuthContext),user=_useContext.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rooms=_useState2[0],setRooms=_useState2[1];useEffect(function(){try{var fetchRooms=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _id,type,getroom,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_id=user._id;type=user.type;getroom={_id:_id,type:type};_context.next=5;return axios.post(\"/message/getid\",getroom);case 5:res=_context.sent;// console.log(res)\nsetRooms(res.data.sort(function(room1,room2){return new Date(room2.updatedAt)-new Date(room1.updatedAt);}));// console.log(response)\ncase 7:case\"end\":return _context.stop();}},_callee);}));return function fetchRooms(){return _ref.apply(this,arguments);};}();fetchRooms();}catch(err){console.log(err);}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"roomscontainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\u30E1\\u30C3\\u30BB\\u30FC\\u30B8\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"roomsWrapper\",children:rooms.map(function(room,index){return/*#__PURE__*/_jsx(Link,{to:\"/talkroom/\".concat(room._id),style:{textDecoration:\"none\",color:\"black\"},children:/*#__PURE__*/_jsx(Room,{Id:room._id},index)},index);})})]});}","map":{"version":3,"names":["React","useContext","useEffect","useState","io","AuthContext","axios","Room","Link","RoomList","user","rooms","setRooms","fetchRooms","_id","type","getroom","post","res","data","sort","room1","room2","Date","updatedAt","err","console","log","map","room","index","textDecoration","color"],"sources":["/home/oshimayamato/practice/matching/frontend/src/pages/direct/RoomList.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\n\nimport io from \"socket.io-client\"\nimport { AuthContext } from '../../state/AuthContext';\nimport axios from 'axios';\nimport \"./RoomList.css\"\nimport Room from '../../components/room/Room';\nimport { Link } from 'react-router-dom';\n\n\n\nexport default function RoomList() {\n\n  const { user } = useContext(AuthContext);\n  \n  const [rooms, setRooms] = useState([]);\n\n  useEffect(() => {\n    try {\n      const fetchRooms = async () => {\n        const _id = user._id\n        const type = user.type\n        const getroom = {\n          _id: _id,\n          type: type\n        }\n        const res = await axios.post(`/message/getid`, getroom);\n        // console.log(res)\n        setRooms(res.data.sort((room1, room2) => {\n          return new Date(room2.updatedAt) - new Date (room1.updatedAt);\n        })\n        );\n      // console.log(response)\n      };\n      fetchRooms();\n    } catch(err) {\n      console.log(err);\n    }\n  }, []);\n  return (\n    <div className=\"roomscontainer\">\n      <div className=\"title\">\n        <h1>メッセージ</h1>\n      </div>\n      <div className=\"roomsWrapper\">\n        {rooms.map((room, index) => (\n          <Link to={`/talkroom/${room._id}`} style={{ textDecoration: \"none\", color: \"black\"}} key={index} >\n              {/* {room.studentName === user.username \n                ? <Room name={room.teacherName} />\n                : <Room name={room.studentName} />\n              } */}\n              <Room Id={room._id}  key={index}/>\n          </Link>\n        ))}\n      </div>\n    \n  </div>\n);\n}\n"],"mappings":"yZAAA,MAAOA,MAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAE9D,MAAOC,GAAE,KAAM,kBAAkB,CACjC,OAASC,WAAW,KAAQ,yBAAyB,CACrD,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAO,gBAAgB,CACvB,MAAOC,KAAI,KAAM,4BAA4B,CAC7C,OAASC,IAAI,KAAQ,kBAAkB,CAAC,wFAIxC,cAAe,SAASC,SAAQ,EAAG,CAEjC,gBAAiBR,UAAU,CAACI,WAAW,CAAC,CAAhCK,IAAI,aAAJA,IAAI,CAEZ,cAA0BP,QAAQ,CAAC,EAAE,CAAC,wCAA/BQ,KAAK,eAAEC,QAAQ,eAEtBV,SAAS,CAAC,UAAM,CACd,GAAI,CACF,GAAMW,WAAU,4FAAG,6JACXC,GAAG,CAAGJ,IAAI,CAACI,GAAG,CACdC,IAAI,CAAGL,IAAI,CAACK,IAAI,CAChBC,OAAO,CAAG,CACdF,GAAG,CAAEA,GAAG,CACRC,IAAI,CAAEA,IACR,CAAC,uBACiBT,MAAK,CAACW,IAAI,kBAAmBD,OAAO,CAAC,QAAjDE,GAAG,eACT;AACAN,QAAQ,CAACM,GAAG,CAACC,IAAI,CAACC,IAAI,CAAC,SAACC,KAAK,CAAEC,KAAK,CAAK,CACvC,MAAO,IAAIC,KAAI,CAACD,KAAK,CAACE,SAAS,CAAC,CAAG,GAAID,KAAI,CAAEF,KAAK,CAACG,SAAS,CAAC,CAC/D,CAAC,CAAC,CACD,CACH;AAAA,qDACC,kBAdKX,WAAU,0CAcf,CACDA,UAAU,EAAE,CACd,CAAE,MAAMY,GAAG,CAAE,CACXC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAClB,CACF,CAAC,CAAE,EAAE,CAAC,CACN,mBACE,aAAK,SAAS,CAAC,gBAAgB,wBAC7B,YAAK,SAAS,CAAC,OAAO,uBACpB,oBAAI,gCAAK,EAAK,EACV,cACN,YAAK,SAAS,CAAC,cAAc,UAC1Bd,KAAK,CAACiB,GAAG,CAAC,SAACC,IAAI,CAAEC,KAAK,qBACrB,KAAC,IAAI,EAAC,EAAE,qBAAeD,IAAI,CAACf,GAAG,CAAG,CAAC,KAAK,CAAE,CAAEiB,cAAc,CAAE,MAAM,CAAEC,KAAK,CAAE,OAAO,CAAE,uBAKhF,KAAC,IAAI,EAAC,EAAE,CAAEH,IAAI,CAACf,GAAI,EAAOgB,KAAK,CAAG,EALoDA,KAAK,CAMxF,EACR,CAAC,EACE,GAEJ,CAER"},"metadata":{},"sourceType":"module","externalDependencies":[]}